<div class="m-5"></div>
<h3 class="d-flex justify-content-center m-1">Updates</h3>

<div class="row justify-content-center">
  <div class="col-sm-10">
    <table class="table table-hover">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col" class="text-center col-md-7">Update</th>
          <th scope="col" class="col-md-3">Date added</th>
          <th scope="col" class="col-md-2">Action
            <a href="{% url 'add_item' %}" class="btn btn-secondary btn-sm ms-4">Add</a>
          </th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr>
          <th scope="row">{{forloop.counter}}</th>
          <td>{{item.item}}</td>
          <td>{{item.date_added}}</td>
          <td class="d-flex">
            <a href="{% url 'update_item' item.id %}" class="btn btn-success btn-sm m-1">Update</a>
            
            <button class="btn btn-danger btn-sm m-1"
              hx-delete="{% url 'delete_update_item' item.id %}"
              hx-target="#update-list"
              hx-confirm="Are you sure you wish to delete this item?">Delete
            </button>
            
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<script>
  function confirmDelete(id) {
    let el = document.createElement('div')
    el.classList.add('whole-page')
    el.innerHTML = `
      <div class="whole-page">
        <div>
          <h3 class="ms-auto">Are you sure you want to delete this item?</h3>
        </div>
        
        <button class="btn btn-danger btn-sm m-1"
          hx-delete="/updates/delete_update_item/${id}"
          hx-target="#update-list">Delete
        </button>
      </div>
    `
    document.getElementsByClassName('container')[0].appendChild(el)
  }
</script>

